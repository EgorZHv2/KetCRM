@using System.Net.Http
@using System.Net.Http.Json
@using System.Threading.Tasks
@using KetCRM.Application.DTOs.Account
@using KetCRM.BlazorClient.Models
@inject HttpClient Http

<div class="modal fade" id="modalRegister" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Изменение данных</h5>
                  <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <div class="row">
                    <div class="col-6">
                      <input @bind="user.Surname" type="text" class="form-control gray-color" placeholder="Фамилия">
                      <input @bind="user.Name" type="text" class="form-control gray-color mt-3" placeholder="Имя">
                      <input @bind="user.Patronymic" type="text" class="form-control gray-color mt-3" placeholder="Отчество">
                      <input @bind="user.Email" type="email" class="form-control gray-color mt-3" placeholder="Почта">
                    </div>
                    <div class="col-6">
                      <input @bind="user.Login" type="text" class="form-control gray-color" placeholder="Логин">
                      <input @bind="user.Password" type="password" class="form-control gray-color mt-3" placeholder="Пароль">
                      <input @bind="user.ConfirmPassword" type="password" class="form-control gray-color mt-3" placeholder="Пароль еще раз">
                      <select style="padding: 4px 0 4px 12px; font-size: 16px"
                        class="gray-color form-select form-select-sm align-items-center mt-3" aria-label="Роль">
                        <option value="1" selected>Староста</option>
                        <option value="2">Кл.руководитель</option>
                        <option value="3">Секретарь</option>
                        <option value="4">Админ</option>
                      </select>
                    </div>
                    <div class="mt-3">
                      <input class="form-control gray-color" type="file" id="formFile">
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-danger" data-mdb-dismiss="modal">Отменить</button>
                  <button @onclick="RegisterUser" class="btn btn-info">Сохранить</button>
                </div>
              </div>
            </div>
       </div>

@code {
    private ApplicationUserVM user = new ApplicationUserVM();

    private async Task RegisterUser()
    {
        await Http.PostAsJsonAsync("api/Account/Register", user);
    }
}
